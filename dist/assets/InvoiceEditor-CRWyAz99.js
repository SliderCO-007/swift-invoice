import{v as j,e as N,H as U,j as m,h as C,o as f,w as t,k as e,s as a,I as _,t as d,l as v,J as T,K as q,D as E,q as L,m as O}from"./index-PvgVEVjR.js";import{u as F}from"./useUserSettings-F13pn6Yx.js";import{u as P}from"./useInvoices-kpvwJ2PF.js";const Y=["src"],$={key:1,class:"text-h4 font-weight-bold"},H={class:"text-body-1"},J={class:"text-center"},Q={class:"text-right"},z={class:"text-right"},K={__name:"InvoiceTemplate",setup(R){const u=N({sender:{companyName:"Swift Invoice Inc.",address:"123 Main Street, Anytown, USA 12345",phoneNumber:"555-123-4567",logoUrl:"https://via.placeholder.com/150x50.png?text=Your+Logo"},client:{name:"John Doe",address:"456 Oak Avenue, Sometown, USA 54321",email:"john.doe@example.com"},invoiceNumber:"INV-001",dateIssued:"2024-07-29",dateDue:"2024-08-12",items:[{description:"Web Design Services",quantity:1,price:2500},{description:"Hosting (1 Year)",quantity:1,price:300},{description:"Domain Name (1 Year)",quantity:1,price:15}],taxRate:8,notes:"Thank you for your business!"}),x=U(()=>u.value.items.reduce((n,o)=>n+o.quantity*o.price,0)),y=U(()=>x.value*(u.value.taxRate/100)),I=U(()=>x.value+y.value),c=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);return(n,o)=>{const i=m("v-col"),p=m("v-row"),V=m("v-table"),l=m("v-divider"),D=m("v-card");return f(),C(D,{class:"invoice-template pa-8",elevation:"3"},{default:t(()=>[e(p,{justify:"space-between",align:"center",class:"mb-8"},{default:t(()=>[e(i,{cols:"6"},{default:t(()=>[u.value.sender.logoUrl?(f(),_("img",{key:0,src:u.value.sender.logoUrl,alt:"Company Logo",class:"company-logo"},null,8,Y)):(f(),_("h1",$,d(u.value.sender.companyName),1))]),_:1}),e(i,{cols:"6",class:"text-right"},{default:t(()=>[o[0]||(o[0]=a("h2",{class:"text-h5 font-weight-bold"},"INVOICE",-1)),a("p",H,"#"+d(u.value.invoiceNumber),1)]),_:1})]),_:1}),e(p,{class:"mb-8"},{default:t(()=>[e(i,{cols:"6"},{default:t(()=>[o[1]||(o[1]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Billed To:",-1)),a("p",null,d(u.value.client.name),1),a("p",null,d(u.value.client.address),1),a("p",null,d(u.value.client.email),1)]),_:1}),e(i,{cols:"6",class:"text-right"},{default:t(()=>[o[2]||(o[2]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"From:",-1)),a("p",null,d(u.value.sender.companyName),1),a("p",null,d(u.value.sender.address),1),a("p",null,d(u.value.sender.phoneNumber),1)]),_:1})]),_:1}),e(p,{class:"mb-8"},{default:t(()=>[e(i,{cols:"6"},{default:t(()=>[a("p",null,[o[3]||(o[3]=a("span",{class:"font-weight-bold"},"Date Issued:",-1)),v(" "+d(u.value.dateIssued),1)])]),_:1}),e(i,{cols:"6",class:"text-right"},{default:t(()=>[a("p",null,[o[4]||(o[4]=a("span",{class:"font-weight-bold"},"Date Due:",-1)),v(" "+d(u.value.dateDue),1)])]),_:1})]),_:1}),e(V,{class:"mb-8"},{default:t(()=>[o[5]||(o[5]=a("thead",null,[a("tr",null,[a("th",{class:"text-left"},"Description"),a("th",{class:"text-center"},"Quantity"),a("th",{class:"text-right"},"Unit Price"),a("th",{class:"text-right"},"Total")])],-1)),a("tbody",null,[(f(!0),_(T,null,q(u.value.items,(r,w)=>(f(),_("tr",{key:w},[a("td",null,d(r.description),1),a("td",J,d(r.quantity),1),a("td",Q,d(c(r.price)),1),a("td",z,d(c(r.quantity*r.price)),1)]))),128))])]),_:1}),e(p,{justify:"end",class:"mb-8"},{default:t(()=>[e(i,{cols:"4"},{default:t(()=>[e(p,null,{default:t(()=>[e(i,null,{default:t(()=>[...o[6]||(o[6]=[v("Subtotal:",-1)])]),_:1}),e(i,{class:"text-right"},{default:t(()=>[v(d(c(x.value)),1)]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(i,null,{default:t(()=>[v("Tax ("+d(u.value.taxRate)+"%):",1)]),_:1}),e(i,{class:"text-right"},{default:t(()=>[v(d(c(y.value)),1)]),_:1})]),_:1}),e(l,{class:"my-2"}),e(p,{class:"font-weight-bold text-h6"},{default:t(()=>[e(i,null,{default:t(()=>[...o[7]||(o[7]=[v("Total:",-1)])]),_:1}),e(i,{class:"text-right"},{default:t(()=>[v(d(c(I.value)),1)]),_:1})]),_:1})]),_:1})]),_:1}),a("div",null,[o[8]||(o[8]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Notes",-1)),a("p",null,d(u.value.notes),1)])]),_:1})}}},W=j(K,[["__scopeId","data-v-8ed967f4"]]),ee={__name:"InvoiceEditor",setup(R){const{settings:u,fetchUserSettings:x}=F(),{addInvoice:y}=P(),I=L(),c=N(!1),n=N({sender:{companyName:"",address:"",phoneNumber:"",logoUrl:""},client:{name:"",address:"",email:""},invoiceNumber:`INV-${Date.now().toString().slice(-4)}`,dateIssued:new Date().toISOString().substr(0,10),dateDue:new Date(new Date().setDate(new Date().getDate()+14)).toISOString().substr(0,10),items:[{description:"",quantity:1,price:0}],taxRate:0,notes:"Thank you for your business!",status:"Draft"});E(async()=>{await x(),u.value&&(n.value.sender={...u.value})});const o=()=>{n.value.items.push({description:"",quantity:1,price:0})},i=V=>{n.value.items.splice(V,1)},p=async()=>{c.value=!0,await y(n.value),c.value=!1,I.push("/invoices")};return(V,l)=>{const D=m("v-card-title"),r=m("v-text-field"),w=m("v-textarea"),g=m("v-col"),S=m("v-row"),h=m("v-btn"),A=m("v-form"),B=m("v-card"),M=m("v-container");return f(),C(M,{fluid:""},{default:t(()=>[e(S,null,{default:t(()=>[e(g,{cols:"12",md:"6"},{default:t(()=>[e(B,{class:"pa-4"},{default:t(()=>[e(D,{class:"text-h5 font-weight-bold mb-4"},{default:t(()=>[...l[8]||(l[8]=[v("Create Invoice",-1)])]),_:1}),e(A,{onSubmit:O(p,["prevent"])},{default:t(()=>[l[11]||(l[11]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Bill To:",-1)),e(r,{modelValue:n.value.client.name,"onUpdate:modelValue":l[0]||(l[0]=s=>n.value.client.name=s),label:"Client Name",variant:"outlined",class:"mb-2"},null,8,["modelValue"]),e(w,{modelValue:n.value.client.address,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value.client.address=s),label:"Client Address",variant:"outlined",class:"mb-2"},null,8,["modelValue"]),e(r,{modelValue:n.value.client.email,"onUpdate:modelValue":l[2]||(l[2]=s=>n.value.client.email=s),label:"Client Email",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),l[12]||(l[12]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Invoice Details:",-1)),e(S,null,{default:t(()=>[e(g,null,{default:t(()=>[e(r,{modelValue:n.value.invoiceNumber,"onUpdate:modelValue":l[3]||(l[3]=s=>n.value.invoiceNumber=s),label:"Invoice #",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(r,{modelValue:n.value.dateIssued,"onUpdate:modelValue":l[4]||(l[4]=s=>n.value.dateIssued=s),label:"Date Issued",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(r,{modelValue:n.value.dateDue,"onUpdate:modelValue":l[5]||(l[5]=s=>n.value.dateDue=s),label:"Date Due",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),l[13]||(l[13]=a("h3",{class:"text-h6 font-weight-bold mt-4 mb-2"},"Items:",-1)),(f(!0),_(T,null,q(n.value.items,(s,k)=>(f(),_("div",{key:k,class:"d-flex align-center mb-2"},[e(r,{modelValue:s.description,"onUpdate:modelValue":b=>s.description=b,label:"Description",variant:"outlined",class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),e(r,{modelValue:s.quantity,"onUpdate:modelValue":b=>s.quantity=b,modelModifiers:{number:!0},label:"Qty",type:"number",variant:"outlined",style:{"max-width":"80px"},class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),e(r,{modelValue:s.price,"onUpdate:modelValue":b=>s.price=b,modelModifiers:{number:!0},label:"Price",type:"number",variant:"outlined",style:{"max-width":"120px"},class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),e(h,{icon:"mdi-delete",variant:"text",color:"red",onClick:b=>i(k)},null,8,["onClick"])]))),128)),e(h,{color:"primary",onClick:o},{default:t(()=>[...l[9]||(l[9]=[v("Add Item",-1)])]),_:1}),l[14]||(l[14]=a("h3",{class:"text-h6 font-weight-bold mt-4 mb-2"},"Notes & Tax:",-1)),e(w,{modelValue:n.value.notes,"onUpdate:modelValue":l[6]||(l[6]=s=>n.value.notes=s),label:"Notes",variant:"outlined",class:"mb-2"},null,8,["modelValue"]),e(r,{modelValue:n.value.taxRate,"onUpdate:modelValue":l[7]||(l[7]=s=>n.value.taxRate=s),modelModifiers:{number:!0},label:"Tax Rate (%)",type:"number",variant:"outlined",style:{"max-width":"150px"}},null,8,["modelValue"]),e(h,{color:"primary",size:"large",class:"mt-4",type:"submit",loading:c.value},{default:t(()=>[...l[10]||(l[10]=[v("Save Invoice",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(g,{cols:"12",md:"6"},{default:t(()=>[l[15]||(l[15]=a("h3",{class:"text-h6 font-weight-bold mb-2"},"Live Preview",-1)),e(W,{invoice:n.value},null,8,["invoice"])]),_:1})]),_:1})]),_:1})}}};export{ee as default};
