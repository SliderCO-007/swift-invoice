import{g as te,_ as ne,a as I,b as re,i as M,p as oe,u as ie,F as se,c as ae,C as ue,r as x,d as ce,e as y,f as le,h as D,w as g,j as v,o as U,k as m,l as T,m as de,n as pe,t as fe}from"./index-PvgVEVjR.js";import{u as me}from"./useAuth-DgPnOMWo.js";var G="https://js.stripe.com/v3",he=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var ge=function(){for(var t=document.querySelectorAll('script[src^="'.concat(G,'"]')),r=0;r<t.length;r++){var n=t[r];if(he.test(n.src))return n}return null},F=function(t){var r="",n=document.createElement("script");n.src="".concat(G).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},ve=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:r})},S=null,A=null,b=null,we=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},ye=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},Ee=function(t){return S!==null?S:(S=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var o=ge();if(!(o&&t)){if(!o)o=F(t);else if(o&&b!==null&&A!==null){var i;o.removeEventListener("load",b),o.removeEventListener("error",A),(i=o.parentNode)===null||i===void 0||i.removeChild(o),o=F(t)}}b=ye(r,n),A=we(n),o.addEventListener("load",b),o.addEventListener("error",A)}catch(a){n(a);return}}),S.catch(function(r){return S=null,Promise.reject(r)}))},ke=function(t,r,n){if(t===null)return null;var o=t.apply(void 0,r);return ve(o,n),o},_,q=!1,H=function(){return _||(_=Ee(null).catch(function(t){return _=null,Promise.reject(t)}),_)};Promise.resolve().then(function(){return H()}).catch(function(e){q||console.warn(e)});var Se=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];q=!0;var o=Date.now();return H().then(function(i){return ke(i,r,o)})};const _e="type.googleapis.com/google.protobuf.Int64Value",Te="type.googleapis.com/google.protobuf.UInt64Value";function J(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function C(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>C(t));if(typeof e=="function"||typeof e=="object")return J(e,t=>C(t));throw new Error("Data cannot be encoded in JSON: "+e)}function E(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case _e:case Te:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>E(t)):typeof e=="function"||typeof e=="object"?J(e,t=>E(t)):e}const L="functions";const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class f extends se{constructor(t,r,n){super(`${L}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,f.prototype)}}function Ae(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function N(e,t){let r=Ae(e),n=r,o;try{const i=t&&t.error;if(i){const a=i.status;if(typeof a=="string"){if(!V[a])return new f("internal","internal");r=V[a],n=a}const s=i.message;typeof s=="string"&&(n=s),o=i.details,o!==void 0&&(o=E(o))}}catch{}return r==="ok"?null:new f(r,n,o)}class be{constructor(t,r,n,o){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ce(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||o?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),o=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:o}}}const O="us-central1",Ce=/^data: (.*?)(?:\n|$)/;function Ne(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new f("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class Pe{constructor(t,r,n,o,i=O,a=(...s)=>fetch(...s)){this.app=t,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new be(t,r,n,o),this.cancelAllRequests=new Promise(s=>{this.deleteService=()=>Promise.resolve(s())});try{const s=new URL(i);this.customDomain=s.origin+(s.pathname==="/"?"":s.pathname),this.region=O}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function Oe(e,t,r){const n=M(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(oe(e.emulatorOrigin+"/backends"),ie("Functions",!0))}function Ie(e,t,r){const n=o=>Re(e,t,o,{});return n.stream=(o,i)=>De(e,t,o,i),n}function W(e){return e.emulatorOrigin&&M(e.emulatorOrigin)?"include":void 0}async function Le(e,t,r,n,o){r["Content-Type"]="application/json";let i;try{i=await n(e,{method:"POST",body:JSON.stringify(t),headers:r,credentials:W(o)})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}async function B(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function Re(e,t,r,n){const o=e._url(t);return xe(e,o,r,n)}async function xe(e,t,r,n){r=C(r);const o={data:r},i=await B(e,n),a=n.timeout||7e4,s=Ne(a),l=await Promise.race([Le(t,o,i,e.fetchImpl,e),s.promise,e.cancelAllRequests]);if(s.cancel(),!l)throw new f("cancelled","Firebase Functions instance was deleted.");const c=N(l.status,l.json);if(c)throw c;if(!l.json)throw new f("internal","Response is not valid JSON object.");let u=l.json.data;if(typeof u>"u"&&(u=l.json.result),typeof u>"u")throw new f("internal","Response is missing data field.");return{data:E(u)}}function De(e,t,r,n){const o=e._url(t);return Ue(e,o,r,n||{})}async function Ue(e,t,r,n){r=C(r);const o={data:r},i=await B(e,n);i["Content-Type"]="application/json",i.Accept="text/event-stream";let a;try{a=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:i,signal:n?.signal,credentials:W(e)})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const w=new f("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const d=N(0,null);return{data:Promise.reject(d),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(d)}}}}}}let s,l;const c=new Promise((p,d)=>{s=p,l=d});n?.signal?.addEventListener("abort",()=>{const p=new f("cancelled","Request was cancelled.");l(p)});const u=a.body.getReader(),h=Fe(u,s,l,n?.signal);return{stream:{[Symbol.asyncIterator](){const p=h.getReader();return{async next(){const{value:d,done:w}=await p.read();return{value:d,done:w}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:c}}function Fe(e,t,r,n){const o=(a,s)=>{const l=a.match(Ce);if(!l)return;const c=l[1];try{const u=JSON.parse(c);if("result"in u){t(E(u.result));return}if("message"in u){s.enqueue(E(u.message));return}if("error"in u){const h=N(0,u);s.error(h),r(h);return}}catch(u){if(u instanceof f){s.error(u),r(u);return}}},i=new TextDecoder;return new ReadableStream({start(a){let s="";return l();async function l(){if(n?.aborted){const c=new f("cancelled","Request was cancelled");return a.error(c),r(c),Promise.resolve()}try{const{value:c,done:u}=await e.read();if(u){s.trim()&&o(s.trim(),a),a.close();return}if(n?.aborted){const p=new f("cancelled","Request was cancelled");a.error(p),r(p),await e.cancel();return}s+=i.decode(c,{stream:!0});const h=s.split(`
`);s=h.pop()||"";for(const p of h)p.trim()&&o(p.trim(),a);return l()}catch(c){const u=c instanceof f?c:N(0,null);a.error(u),r(u)}}},cancel(){return e.cancel()}})}const j="@firebase/functions",$="0.13.1";const Ve="auth-internal",je="app-check-internal",$e="messaging-internal";function Me(e){const t=(r,{instanceIdentifier:n})=>{const o=r.getProvider("app").getImmediate(),i=r.getProvider(Ve),a=r.getProvider($e),s=r.getProvider(je);return new Pe(o,i,a,s,n)};ae(new ue(L,t,"PUBLIC").setMultipleInstances(!0)),x(j,$,e),x(j,$,"esm2020")}function Ge(e=te(),t=O){const n=ne(I(e),L).getImmediate({identifier:t}),o=re("functions");return o&&qe(n,...o),n}function qe(e,t,r){Oe(I(e),t,r)}function He(e,t,r){return Ie(I(e),t)}Me();const Je=Se("pk_test_51SnOHZPpf0h9E3zvVVALY8XidMxwieU2Wd6bRosG0hOWV29mHQAk41Fli67WtmbtlC6PXBCosvRQLDJz4J0nYFVh00n3HA1jNU");function We(){const e=y(null),t=y(null);return Je.then(n=>{e.value=n}).catch(n=>{n&&n.message?t.value=n.message:t.value="An unknown error occurred while loading Stripe."}),{redirectToCheckout:async()=>{if(!e.value){t.value="Stripe.js has not loaded yet.";return}try{const n=Ge(le),a=(await He(n,"createCheckoutSession")()).data.id,{error:s}=await e.value.redirectToCheckout({sessionId:a});s&&(t.value=s.message)}catch(n){n&&n.message?t.value=n.message:t.value="An unknown error occurred during checkout."}},error:t}}const Ye={__name:"RegisterPage",setup(e){const t=y(""),r=y(""),n=y(""),{error:o,signUp:i,signInWithGoogle:a}=me(),{redirectToCheckout:s,error:l}=We(),c=y(null),u=async()=>{if(c.value=null,await i(r.value,n.value),o.value){c.value=o.value;return}await s(),l.value&&(c.value=l.value)},h=async()=>{if(c.value=null,await a(),o.value){c.value=o.value;return}await s(),l.value&&(c.value=l.value)};return(p,d)=>{const w=v("v-card-title"),P=v("v-text-field"),X=v("v-alert"),R=v("v-btn"),Y=v("v-form"),z=v("v-card-text"),K=v("v-card"),Q=v("v-col"),Z=v("v-row"),ee=v("v-container");return U(),D(ee,{fluid:"",class:"fill-height bg-grey-lighten-4"},{default:g(()=>[m(Z,{justify:"center"},{default:g(()=>[m(Q,{cols:"12",sm:"8",md:"4"},{default:g(()=>[m(K,{class:"pa-4"},{default:g(()=>[m(w,{class:"text-h4 font-weight-bold text-center mb-4"},{default:g(()=>[...d[3]||(d[3]=[T("Register for Swift Invoice",-1)])]),_:1}),m(z,null,{default:g(()=>[m(Y,{onSubmit:de(u,["prevent"])},{default:g(()=>[m(P,{modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=k=>t.value=k),label:"Name",required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),m(P,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=k=>r.value=k),label:"Email",type:"email",required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),m(P,{modelValue:n.value,"onUpdate:modelValue":d[2]||(d[2]=k=>n.value=k),label:"Password",type:"password",required:"",variant:"outlined",class:"mb-4"},null,8,["modelValue"]),c.value?(U(),D(X,{key:0,type:"error",dense:"",class:"mb-4"},{default:g(()=>[T(fe(c.value),1)]),_:1})):pe("",!0),m(R,{type:"submit",color:"primary",block:"","x-large":""},{default:g(()=>[...d[4]||(d[4]=[T("Register and Pay",-1)])]),_:1})]),_:1}),m(R,{onClick:h,color:"red",block:"","x-large":"",class:"mt-4"},{default:g(()=>[...d[5]||(d[5]=[T("Sign in with Google",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Ye as default};
