import{e as n,y as u,L as f,M as d,N as m,O as U,P as g,Q as i,R as y,S}from"./index-PvgVEVjR.js";const b=()=>{const e=n({companyName:"",address:"",phoneNumber:"",logoUrl:""}),s=n(!1),a=n(null),l=n(!1);return{settings:e,loading:s,error:a,success:l,fetchUserSettings:async()=>{if(s.value=!0,a.value=null,l.value=!1,!u.currentUser){a.value="You must be logged in to manage settings.",s.value=!1;return}try{const t=g(i,"userSettings",u.currentUser.uid),r=await S(t);r.exists()&&(e.value={...e.value,...r.data()})}catch(t){a.value=t.message}finally{s.value=!1}},saveUserSettings:async t=>{if(s.value=!0,a.value=null,l.value=!1,!u.currentUser){a.value="You must be logged in to save settings.",s.value=!1;return}try{let r=e.value.logoUrl;if(t){const c=f(d,`logos/${u.currentUser.uid}/${t.name}`);await m(c,t),r=await U(c)}const o={companyName:e.value.companyName,address:e.value.address,phoneNumber:e.value.phoneNumber,logoUrl:r},v=g(i,"userSettings",u.currentUser.uid);await y(v,o,{merge:!0}),e.value={...e.value,...o},l.value=!0}catch(r){a.value=r.message}finally{s.value=!1}}}};export{b as u};
