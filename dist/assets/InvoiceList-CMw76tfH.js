import{D as S,e as N,h as $,w as t,j as a,q as B,o as T,k as n,s as V,l as u,E as d,t as _}from"./index-PvgVEVjR.js";import{u as j}from"./useInvoices-kpvwJ2PF.js";const A={__name:"InvoiceList",setup(q){const v=B(),{invoices:f,loading:m,fetchInvoices:p}=j();S(()=>{p()});const b=N([{title:"Invoice #",key:"invoiceNumber",sortable:!0},{title:"Client",key:"client.name",sortable:!0},{title:"Date Issued",key:"dateIssued",sortable:!0},{title:"Date Due",key:"dateDue",sortable:!0},{title:"Total",key:"total",sortable:!1},{title:"Status",key:"status",sortable:!0},{title:"Actions",key:"actions",sortable:!1}]),y=(e,s)=>{if(!e)return 0;const r=e.reduce((i,c)=>i+c.quantity*c.price,0),l=r*((s||0)/100);return r+l},k=e=>{switch(e){case"Paid":return"green";case"Sent":return"blue";case"Draft":return"grey";default:return"grey"}},g=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),x=e=>{v.push(`/invoice/${e}/edit`)},I=e=>{console.log(`Deleting invoice ${e}`)};return(e,s)=>{const r=a("v-btn"),l=a("v-card-title"),i=a("v-chip"),c=a("v-data-table"),C=a("v-card-text"),h=a("v-card"),D=a("v-container");return T(),$(D,{fluid:""},{default:t(()=>[n(h,null,{default:t(()=>[n(l,{class:"d-flex justify-space-between align-center"},{default:t(()=>[s[1]||(s[1]=V("span",{class:"text-h5 font-weight-bold"},"Invoices",-1)),n(r,{color:"primary",to:"/invoice/new"},{default:t(()=>[...s[0]||(s[0]=[u("Create Invoice",-1)])]),_:1})]),_:1}),n(C,null,{default:t(()=>[n(c,{headers:b.value,items:d(f),loading:d(m),class:"elevation-1"},{"item.status":t(({item:o})=>[n(i,{color:k(o.status),dark:""},{default:t(()=>[u(_(o.status),1)]),_:2},1032,["color"])]),"item.total":t(({item:o})=>[u(_(g(y(o.items,o.taxRate))),1)]),"item.actions":t(({item:o})=>[n(r,{icon:"mdi-pencil",variant:"text",onClick:w=>x(o.id)},null,8,["onClick"]),n(r,{icon:"mdi-delete",variant:"text",color:"red",onClick:w=>I(o.id)},null,8,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1})]),_:1})]),_:1})}}};export{A as default};
